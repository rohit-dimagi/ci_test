language: python
python:
  - "2.7"

jobs:
  include:
    - stage: build
      script:
        - pip install -r requirements.txt
    - stage: test
      services:
        - postgresql
      before_script: 
        - psql -c "CREATE DATABASE teststudentapi;" -U postgres
        - psql -c "CREATE USER testuser WITH PASSWORD '1234';" -U postgres
      script:
        - export ENVIRONMENT=testing
        - export TEST_DATABASE_URI="postgres://testuser:1234@localhost:5432/teststudentapi
